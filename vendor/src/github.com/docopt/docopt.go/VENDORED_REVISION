Based off upstream commit 717d0bc993e799477657cfecd158070d6fb0ddfe
Vendored on Wed Apr  2 18:31:20 UTC 2014
