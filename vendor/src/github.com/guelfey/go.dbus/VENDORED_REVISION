Based off upstream commit f6a3a2366cc39b8479cadc499d3c735fb10fbdda
Vendored on Wed Apr  2 18:31:20 UTC 2014
