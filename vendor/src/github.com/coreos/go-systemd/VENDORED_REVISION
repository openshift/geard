Based off upstream commit 9d69345e9a0dee51b8ebabb86b7b505db9851461
Vendored on Wed Apr  2 18:31:20 UTC 2014
