Based off upstream commit 94e98a55fb412fcbcfc302555cb990f5e1590627
Vendored on Wed Apr  2 18:31:21 UTC 2014
